---
title: "Travis初次使用的坑"
date: "2019-01-07 00:11:03"
lastMod: "2019-01-07 00:11:03"
categories: ["it"]
tags: ["travis", "CI"]
---

初次试用Travis，最开始都很顺利。
使用github账号登录，同步项目，测试构建，甚至构建go和做npm都异常的顺利，当然这些都跟做过一些功课，以及自己对Jenkins已经很熟练应当是有很大关系的。

遇到一个小坑：travis版本是1.8.9，好像是从1.8.8开始，自动在.travis.yml中添加的脚本，在路径“/”前面会加上“\”转义符，会导致报错：No such file or directory。删除“\”转义符即可。

最大的坑在于：构建完后，需要通过ssh登录自己的服务器，将构建后的程序包上传更新。直接使用网上说的，以及参考官方文档，但一直就是报错：iv undefined。国内外找遍了，没有一个答案能解决问题。

2-3天过去后，终于中午突然发现自己使用的是.com的域名，然后马上看自己的登录信息，果然是.com的！应当是最开始接触Travis，对.org和.com没有在意。在有一定了解后，这两个web外观相似程度竟然有90%以上，所以我直接就忽略了，我猜测的是有可能.org和.com合并了吧。
但其实不然，我修改了登录命令：trivis login --org，然后重新加密私钥，测试脚本。打开travis-ci.org，果然，成功了。而且不止是成功了，我看到之前其实已经成功的构建好多次，但我当时其实是访问的travis-ci.com，那边一直在报失败……很坑爹！！！希望看到这里的你，不会再被坑到。
网上搜索“iv undefined”，前几个答案的同学，如果你看到了，试试看是不是登录错了吧。